import os
import select
import signal

import signalfd

fd = signalfd.get_fd()

while 1:
	r, w, x = select.select([fd], [], [])
	if r:
		buf = os.read(fd, 1)
		if not buf:
			break

		if isinstance(buf, str):
			sig = ord(buf[0])  # Python 2
		else:
			sig, = buf         # Python 3

		if sig == signal.SIGTERM:
			break
